define(["app","webApi"],function(e,t){"use strict";function o(e,t){function o(){e.request("POST","category/all").then(function t(e){n.categories=e.data,console.log(e)},function o(e){console.log(e)})}console.log("CategoryCtrl");var n=this;this.editMode=!1,this.categories=t,this.category={parentCategory:null,name:null,description:null},this.create=function(){e.request("POST","category/create",this.category).then(function t(e){console.log(e),n.cancel()},function i(e){console.log(e)}).then(o)},this.edit=function(e){if(null!==this.categories)for(var t=0;t<this.categories.length;t++)this.categories[t]._id===e&&(this.editMode=this.categories[t]._id,this.category=this.categories[t])},this.update=function(t){t._id=this.editMode,e.request("POST","category/update",t).then(function i(e){console.log(e),n.cancel()},function c(e){console.log(e)}).then(o)},this["delete"]=function(t){e.request("POST","category/delete",{_id:t}).then(function n(e){console.log(e)},function i(e){console.log(e)}).then(o)},this.cancel=function(){this.category={parentCategory:null,name:null,description:null},this.editMode=!1}}angular.module("app").controller("CategoryCtrl",o),o.$inject=["webApi","categories"]});