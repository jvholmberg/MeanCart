define(["app","webApi"],function(t,e){"use strict";function o(t,e){function o(){t.request("POST","category/all").then(function e(t){n.categories=t.data,console.log(t)},function o(t){console.log(t)})}console.log("CategoryCtrl");var n=this;this.editMode=!1,this.categories=e,this.category={parentCategory:null,title:null,description:null},this.create=function(){t.request("POST","category/create",this.category).then(function e(t){console.log(t),n.cancel()},function i(t){console.log(t)}).then(o)},this.edit=function(t){if(null!==this.categories)for(var e=0;e<this.categories.length;e++)this.categories[e]._id===t&&(this.editMode=this.categories[e]._id,this.category=this.categories[e])},this.update=function(e){e._id=this.editMode,t.request("POST","category/update",e).then(function i(t){console.log(t),n.cancel()},function c(t){console.log(t)}).then(o)},this["delete"]=function(e){t.request("POST","category/delete",{_id:e}).then(function n(t){console.log(t)},function i(t){console.log(t)}).then(o)},this.cancel=function(){this.category={parentCategory:null,title:null,description:null},this.editMode=!1}}angular.module("app").controller("CategoryCtrl",o),o.$inject=["webApi","categories"]});