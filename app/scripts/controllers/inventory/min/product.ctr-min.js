define(["app","webApi"],function(t,l){"use strict";function n(t,l,n,e){function u(){t.request("POST","product/all").then(function l(t){o.products=t.data},function n(t){console.log(t)})}console.log("ProductCtrl");var o=this;this.categories=l,this.brands=e,this.products=n,this.product={title:null,summary:null,description:null,category:null,brand:null,sku:null,price:null,salePrice:null,stockLevel:null,stockStatus:null,weight:null,width:null,height:null,depth:null},this.editMode=!1,this.create=function(){t.request("POST","product/create",this.product).then(function l(t){console.log(t),o.cancel()},function n(t){console.log(t)}).then(u)},this.edit=function(t){if(null!==this.products)for(var l=0;l<this.products.length;l++)this.products[l]._id===t&&(this.editMode=this.products[l]._id,this.product=this.products[l])},this.update=function(l){l._id=this.editMode,t.request("POST","product/update",l).then(function n(t){console.log(t),o.cancel()},function e(t){console.log(t)}).then(u)},this["delete"]=function(l){t.request("POST","product/delete",{_id:l}).then(function n(t){console.log(t)},function e(t){console.log(t)}).then(u)},this.cancel=function(){this.product={title:null,summary:null,description:null,category:null,brand:null,sku:null,price:null,salePrice:null,stockLevel:null,stockStatus:null,weight:null,width:null,height:null,depth:null},this.editMode=!1}}angular.module("app").controller("ProductCtrl",n),n.$inject=["webApi","categories","products","brands"]});